#N canvas 143 101 1160 1014 10;
#X obj 2 1 cnv 15 500 30 empty empty DSP.plugin:(ar.conn-listener-quad~)
5 15 1 18 -228856 -16662 0;
#X obj 319 6 cnv 20 20 20 empty empty nodeID:(\$2) 5 10 0 12 -233017
-66577 0;
#X obj 315 37 namecanvas \$4.plugin.patch;
#X text 10 62 the audio signal should be copied and routed N times
for each of the N loudspeakers;
#N canvas 0 29 704 530 more 0;
#X obj 507 45 r \$4;
#X text 552 47 <- connection messages & coeffs;
#X obj 275 169 s \$1-to-SPIN;
#X text 372 170 <- this is how to send to SPIN;
#X text 163 213 <- this is how to receiver listener params;
#X obj 275 147 list prepend \$3 setParam;
#X text 68 260 (alternatively \, params can be stored in an anyreg
that lives in the listener's pugin patch \, and accessed here);
#X obj 36 52 r \$4.nodeMsg;
#X obj 70 214 r \$3.nodeMsg;
#X obj 506 72 route list setThru mute;
#X obj 70 240 route setParam setSpread;
#X text 122 253 need "setSpread" method ??;
#X text 69 292 yaw FILTER: Lpf1 = 500 + ( 21550 * (0.5 - ( .5*cos(pow(rolloffScaler
\, 4)*M_PI) ) ) ) \;;
#X text 66 358 rolloffScaler = (double) (1.0 - (.01*conn->rolloffEffect
* (1.0 - snkyawGain))) \;;
#X text 70 325 snkyawGain = conn->snk->rolloff->getValue( (snkyaw *
conn->snk->spread) / M_PI ) \;;
#X obj 36 79 route setDistanceEffect setRolloffEffect setDopplerEffect
setDiffractionEffect setThru;
#X text 129 49 connection params from SPIN;
#X connect 0 0 9 0;
#X connect 5 0 2 0;
#X connect 7 0 15 0;
#X connect 8 0 10 0;
#X restore 544 40 pd more;
#X text 188 350 <- audio from source;
#X obj 80 351 receive~ \$2.from~;
#X text 30 110 from vAudioRenderer;
#X obj 80 478 dsp.conn.distance~;
#X obj 69 290 s \$0-thru;
#X obj 109 266 s \$0-mute;
#X obj 150 449 r \$0-thru;
#X obj 215 450 r \$0-mute;
#X obj 359 128 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 358 153 s \$0-mute;
#X text 195 486 source to sink distance and absorption;
#X obj 177 553 *~ 0.2;
#X obj 177 527 lop~ 50;
#X text 231 524 ambient signal (indirect);
#X floatatom 227 554 5 0 0 0 - - -;
#X obj 37 131 receive \$2->\$3;
#X obj 37 174 route bang thru mute gainDB delay aed;
#X text 418 631 sink-gain diffraction_hz;
#X text 267 903 sink-gain diffraction_hz;
#X obj 359 103 loadbang1 0;
#X obj 219 197 s \$0-aed;
#X obj 409 583 r \$0-aed;
#X obj 148 243 s \$0-gainDb;
#X obj 182 223 s \$0-delay;
#X obj 116 389 r \$0-gainDb;
#X obj 210 389 r \$0-delay;
#X obj 254 859 r \$0-aed;
#X obj 116 416 dsp.compute-src1;
#N canvas 0 22 457 178 debug 0;
#X obj 237 50 unpack 0 0 0;
#X floatatom 274 82 5 0 0 0 - - -;
#X floatatom 311 83 5 0 0 0 - - -;
#X floatatom 234 82 5 0 0 0 - - -;
#X text 219 102 azi-rad elev-rad distance-m;
#X obj 237 26 r \$0-aed;
#X floatatom 57 57 5 0 0 0 - - -;
#X floatatom 150 70 5 0 0 0 - - -;
#X text 163 84 dist-ms;
#X text 63 69 gainDB;
#X obj 150 45 r \$0-delay;
#X obj 57 34 r \$0-delay;
#X connect 0 0 3 0;
#X connect 0 1 1 0;
#X connect 0 2 2 0;
#X connect 5 0 0 0;
#X connect 10 0 7 0;
#X connect 11 0 6 0;
#X restore 273 126 pd debug;
#X obj 208 645 dsp.conn-vmic~ \$0 0 vmicL-front \$3;
#X obj 409 609 dsp.compute-sink1 \$3 vmicL-front;
#X obj 53 912 dsp.conn-vmic~ \$0 1 vmicR-front \$3;
#X obj 254 885 dsp.compute-sink1 \$3 vmicR-front;
#X text 372 809 sink-gain diffraction_hz;
#X obj 359 765 r \$0-aed;
#X obj 163 823 dsp.conn-vmic~ \$0 2 vmicR-rear \$3;
#X obj 358 791 dsp.compute-sink1 \$3 vmicR-rear;
#X text 434 718 sink-gain diffraction_hz;
#X obj 425 670 r \$0-aed;
#X obj 425 696 dsp.compute-sink1 \$3 vmicL-rear;
#X obj 231 722 dsp.conn-vmic~ \$0 3 vmicL-rear \$3;
#X connect 6 0 8 0;
#X connect 8 0 17 0;
#X connect 8 0 34 0;
#X connect 8 0 36 0;
#X connect 8 0 40 0;
#X connect 8 0 45 0;
#X connect 11 0 8 2;
#X connect 12 0 8 3;
#X connect 13 0 14 0;
#X connect 16 0 34 1;
#X connect 16 0 36 1;
#X connect 16 0 40 1;
#X connect 16 0 45 1;
#X connect 17 0 16 0;
#X connect 19 0 16 1;
#X connect 20 0 21 0;
#X connect 21 1 9 0;
#X connect 21 2 10 0;
#X connect 21 3 27 0;
#X connect 21 4 28 0;
#X connect 21 5 25 0;
#X connect 24 0 13 0;
#X connect 26 0 35 0;
#X connect 29 0 32 0;
#X connect 30 0 32 1;
#X connect 31 0 37 0;
#X connect 32 0 8 1;
#X connect 35 0 34 2;
#X connect 37 0 36 2;
#X connect 39 0 41 0;
#X connect 41 0 40 2;
#X connect 43 0 44 0;
#X connect 44 0 45 2;
#X coords 0 0 1 1 400 400 0;
